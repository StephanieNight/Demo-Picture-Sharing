@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Velkommen</h1>
    <img src="./images/picture.jpg" style="width: 30%;">
    <p>Her kan du uploade de billeder du har taget i løbet af dagen og downloade dem andre har uploaded fra galleriet</p>

    <form method="post" enctype="multipart/form-data">
        <label class="btn btn-primary" for="files">Vælg filer</label>
        <input id="files" type="file" name="files" multiple style="display:none">
        <div id="file-names" style="margin-top: 10px;">Ingen filer er valgt</div>
        <button class="btn btn-success" type="button" onclick="uploadFiles()">Upload</button>
    </form>
    <script>
        function uploadFiles() {
            var formData = new FormData();
            var files = document.getElementById("files").files;
            if (files.length > 0) {

                for (var i = 0; i < files.length; i++) {
                    formData.append("files", files[i]);
                }

                var xhr = new XMLHttpRequest();
                xhr.open("POST", "/Home/UploadFiles", true);
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        alert("Files uploaded successfully!");
                        // You can optionally perform some action after successful upload
                    } else {
                        alert("Error uploading files. Please try again later.");
                    }
                };
                xhr.send(formData);
            }
            else 
            {
                alert("Du skal vælge en fil spade.")
            }
        }
        // Get the file input element
        const fileInput = document.querySelector('input[type="file"]');

        // Get the submit button
        const submitButton = document.querySelector('button[type="submit"]');

        // Get the file names div
        const fileNamesDiv = document.getElementById('file-names');

        // Add an event listener to the file input for when files are selected
        fileInput.addEventListener('change', function () {

            // Clear the previous file names
            fileNamesDiv.innerHTML = '';

            // Check if any files are selected
            if (fileInput.files.length === 0) {
                // If no files are selected, display "No files selected"
                const noFilesDiv = document.createElement('div');
                noFilesDiv.textContent = 'Ingen filer er valgt';
                fileNamesDiv.appendChild(noFilesDiv);
            } else {
                // Loop through each selected file
                for (const file of fileInput.files) {
                    // Create a new div element to display the file name
                    const fileNameDiv = document.createElement('div');
                    fileNameDiv.textContent = file.name;

                    // Append the file name div to the file names div
                    fileNamesDiv.appendChild(fileNameDiv);
                }
            }
        });
    </script>
</div>
